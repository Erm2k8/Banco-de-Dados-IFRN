{% extends "base.html" %} 
{% load humanize %}

{% block titulo_pagina %}
<h2>Média ENADE por Área e Curso - Exercício 3</h2>
{% endblock %} 

{% block conteudo %}
<div class="dashboard">
    <div class="card">
        <h3>ENADE >= 3.0 Agrupado por Área e Curso</h3>
        <p>Média do ENADE por área de conhecimento e curso, onde a média é maior ou igual a 3.0.</p>
        
        {% if data %}
            <table style="width: 100%; border-collapse: collapse; margin-top: 20px;">
                <thead>
                    <tr style="background-color: #f0f8ff; border: 1px solid #ddd;">
                        <th style="padding: 12px; text-align: left; border: 1px solid #ddd;">Área de Conhecimento</th>
                        <th style="padding: 12px; text-align: left; border: 1px solid #ddd;">Nome do Curso</th>
                        <th style="padding: 12px; text-align: center; border: 1px solid #ddd;">Média ENADE</th>
                    </tr>
                </thead>
                <tbody>
                    {% for item in data %}
                    <tr style="border: 1px solid #ddd;">
                        <td style="padding: 10px; border: 1px solid #ddd; font-weight: bold; color: #1565c0;">{{ item.0 }}</td>
                        <td style="padding: 10px; border: 1px solid #ddd;">{{ item.1 }}</td>
                        <td style="padding: 10px; border: 1px solid #ddd; text-align: center;">
                            {% if item.2 >= 4.5 %}
                                <span style="background-color: #4caf50; color: #333; padding: 4px 8px; border-radius: 4px; font-weight: bold;">{{ item.2|floatformat:2 }}</span>
                            {% elif item.2 >= 4.0 %}
                                <span style="background-color: #8bc34a; color: #333; padding: 4px 8px; border-radius: 4px; font-weight: bold;">{{ item.2|floatformat:2 }}</span>
                            {% elif item.2 >= 3.5 %}
                                <span style="background-color: #cddc39; color: #333; padding: 4px 8px; border-radius: 4px; font-weight: bold;">{{ item.2|floatformat:2 }}</span>
                            {% else %}
                                <span style="background-color: #ffeb3b; color: #333; padding: 4px 8px; border-radius: 4px; font-weight: bold;">{{ item.2|floatformat:2 }}</span>
                            {% endif %}
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        {% else %}
            <p style="color: #666; font-style: italic; margin-top: 20px;">
                Nenhuma combinação de área e curso encontrada com média ENADE >= 3.0.
            </p>
        {% endif %}
        
        <p style="margin-top: 20px; font-style: italic;">
            Total de registros encontrados: {{ data|length }}
        </p>
        
        <div style="margin-top: 15px; font-size: 12px; color: #666;">
            <strong>Legenda das cores:</strong>
            <span style="background-color: #4caf50; padding: 2px 6px; margin: 0 5px; border-radius: 3px;">≥ 4.5</span>
            <span style="background-color: #8bc34a; padding: 2px 6px; margin: 0 5px; border-radius: 3px;">≥ 4.0</span>
            <span style="background-color: #cddc39; padding: 2px 6px; margin: 0 5px; border-radius: 3px;">≥ 3.5</span>
            <span style="background-color: #ffeb3b; padding: 2px 6px; margin: 0 5px; border-radius: 3px;">≥ 3.0</span>
        </div>
    </div>
</div>
{% endblock %}